diff --git a/bin.js b/bin.js
index d970c52c4b7dfa05746b4fb1d23418025b885d78..7e30d71703efb2ea4df4c324c3268dd14d6b6ddc 100755
--- a/bin.js
+++ b/bin.js
@@ -1,4 +1,4 @@
 #!/usr/bin/env node
 "use strict";
 
-require("./");
+import("./");
diff --git a/dist/changesets-cli.esm.js b/dist/changesets-cli.esm.js
index f0c19f8f1130425be51c04743abd9f8f078ea840..01aef6acabf68ee865accf68598789f579e1f1d2 100644
--- a/dist/changesets-cli.esm.js
+++ b/dist/changesets-cli.esm.js
@@ -749,6 +749,9 @@ async function internalPublish(pkgName, opts, twoFactorState) {
   let publishFlags = opts.access ? ["--access", opts.access] : [];
   publishFlags.push("--tag", opts.tag);
 
+  console.log('opts', JSON.stringify(opts, null, 2));
+  console.log('publishFlags:', JSON.stringify(publishFlags, null, 2));
+
   if ((await twoFactorState.isRequired) && !isCI) {
     let otpCode = await getOtpCode(twoFactorState);
     publishFlags.push("--otp", otpCode);
@@ -877,6 +880,8 @@ async function publishPackages({
   });
   return Promise.all(unpublishedPackagesInfo.map(pkgInfo => {
     let pkg = packagesByName.get(pkgInfo.name);
+    console.log('pkgInfo', JSON.stringify(pkgInfo, null, 2));
+    console.log('preState', JSON.stringify(preState, null, 2));
     return publishAPackage(pkg, access, twoFactorState, getReleaseTag(pkgInfo, preState, tag));
   }));
 }
@@ -1003,6 +1008,8 @@ async function publish(cwd, {
 }, config) {
   const releaseTag = tag && tag.length > 0 ? tag : undefined;
   let preState = await readPreState(cwd);
+  console.log('releaseTag', releaseTag);
+  console.log('preState', JSON.stringify(preState, null, 2));
 
   if (releaseTag && preState && preState.mode === "pre") {
     error("Releasing under custom tag is not allowed in pre mode");
diff --git a/package.json b/package.json
index 8007c9c3d40f65b6de291a032e1a3bb86660e61f..8a197a6b4419a6c0efc5996478e09ad98781262a 100644
--- a/package.json
+++ b/package.json
@@ -13,6 +13,7 @@
     "changelog",
     "commit"
   ],
+  "type": "module",
   "main": "dist/changesets-cli.cjs.js",
   "module": "dist/changesets-cli.esm.js",
   "exports": {
