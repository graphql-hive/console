extend schema
  @link(
    url: "https://specs.apollo.dev/federation/v2.3"
    import: ["@key", "@shareable", "@external", "@requires"]
  )

"""
Product extension adding inventory and delivery information
"""
type Product @key(fields: "upc dimensions") {
  """
  Universal Product Code
  """
  upc: String!
  """
  Physical dimensions (from products subgraph)
  """
  dimensions: ProductDimension @external
  """
  Delivery estimates for a given zip code (requires dimensions data)
  """
  delivery(zip: String): DeliveryEstimates @requires(fields: "dimensions { size weight }")
}

"""
Physical dimensions of a product (shared across subgraphs)
"""
type ProductDimension @shareable {
  """
  Size description (e.g., 'Small', 'Large', '10x5x3')
  """
  size: String
  """
  Weight in pounds
  """
  weight: Float
}

"""
Delivery time estimates for a product
"""
type DeliveryEstimates {
  """
  Estimated standard delivery date
  """
  estimatedDelivery: String
  """
  Fastest possible delivery date
  """
  fastestDelivery: String
}

"""
Available shipping classes with delivery speeds
"""
enum ShippingClass @shareable {
  """
  Standard ground shipping (5-7 business days)
  """
  STANDARD
  """
  Express shipping (2-3 business days)
  """
  EXPRESS
  """
  Overnight shipping (next business day)
  """
  OVERNIGHT
}
