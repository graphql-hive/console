import { Callout, Tab, Tabs } from 'nextra-theme-docs'

# Apollo Router

[Apollo Router](https://www.apollographql.com/docs/router/) is the Rust implementation of the Apollo
Federation runtime.

Hive ships a custom build of Apollo Gateway,
[because that's how native extensions works](https://www.apollographql.com/docs/router/customizations/native).

## Installation and Supergraph from CDN

Once you have all services schemas pushed to Hive, and available in the CDN, you can
[create a CDN Access Token and gain access to the CDN endpoint](/features/high-availability-cdn#cdn-access-tokens).

<Tabs items={['Binary', 'Docker']}>
  <Tab>
    Download Apollo Router for Linux (`x86_64`), MacOS (`x86_64`) or Windows (`x86_64`):

    ```bash
    curl -fsSL https://graphql-hive.com/apollo-router-download.sh | bash
    ```

    Start the router:

    ```bash
    HIVE_CDN_ENDPOINT="..." HIVE_CDN_KEY="..." ./router
    ```

  </Tab>
  <Tab>
      Running Apollo Router with Hive's Schema Registry:

      ```bash
      docker run -p 4000:4000 \
        --env HIVE_CDN_ENDPOINT="..." \
        --env HIVE_CDN_KEY="..." \
        --rm \
        ghcr.io/kamilkisiela/graphql-hive/apollo-router:latest
      ```

      Passing command-line arguments:

      ```bash
      docker run -p 4000:4000 \
        --env HIVE_CDN_ENDPOINT="..." \
        --env HIVE_CDN_KEY="..." \
        --rm \
        ghcr.io/kamilkisiela/graphql-hive/apollo-router:latest --log debug
      ```

  </Tab>
</Tabs>

## Configuration

- `HIVE_CDN_ENDPOINT` - the endpoint Hive generated for you in the previous step
- `HIVE_CDN_KEY` - the access key
- `HIVE_CDN_POLL_INTERVAL` - polling interval (default is 10 seconds)

<Callout>
  The `HIVE_CDN_ENDPOINT` variable should not include any artifact suffix (for example,
  `/supergraph`), it should be in the following format:
  `https://cdn.graphql-hive.com/artifacts/v1/TARGET_ID`
</Callout>

## Additional Resources

- [Get started with Apollo Federation and Hive guide](/get-started/apollo-federation)
- [Apollo Router documentation](https://www.apollographql.com/docs/router/)
