# CI/CD and Hive CLI

This guide is a collection of features and capabilities you can configure with Hive, to integrate it
with Continuous Integration (CI) Continuous Deployment (CD) setups.

## Overview

The [Hive CLI](/docs/api-reference/cli) can be installed on any environment, including CI/CD
environments.

If you are using a JavaScript/NodeJS project, you should install the
[Hive CLI](/docs/api-reference/cli#nodejs) under `devDependencies` of your project, and use it
directly with your preferred package manager (for example: `yarn hive ...` or `pnpm hive ...`).

If you are using a different runtime environment for your project, you should install the
[Hive CLI binary](/docs/api-reference/cli#binary) and use it directly as a binary (`hive ...`).

### GitHub Check Suites

If you are using GitHub Actions, you can specify an additional flag to the Hive CLI: `--github`.

If [GitHub Integration](/docs/management/organizations#github) is enabled for your organization, and
the
[GitHub repository has access to the GitHub repository the action is running from](/docs/management/projects#github-repository)
is active, you may specify an additional `--github` flag to report the results back to GitHub as
Check Suite (for `schema:check` and `schema:publish` commands):

```bash
hive schema:publish schema.graphql --github
```

```bash
hive schema:check schema.graphql --github
```

#### GitHub Workflow for CI

The following workflow will run the check workflow for every Pull Request, and will associated the
check results with the Pull Request.

```yaml filename=".github/workflows/ci.yml"
on:
  pull_request:
    branches: [main]
jobs:
  check:
    runs-on: ubuntu-22.04
    steps:
      - name: checkout
        uses: actions/checkout@v3
      - name: schema check
        env:
          HIVE_TOKEN: ${{ secrets.HIVE_TOKEN }}
        run: |
          curl -sSL https://graphql-hive.com/install.sh | sh
          hive schema:check "schema.graphql" \
            --registry.accessToken ${{ env.HIVE_TOKEN }} \
            --github
```

#### GitHub Workflow for CD

The following workflow will run the publish the latest schema to the schema registry for every push
to `main` branch.

```yaml filename=".github/workflows/cd.yml"
on:
  push:
    branches: [main]
jobs:
  publish:
    runs-on: ubuntu-22.04
    steps:
      - name: checkout
        uses: actions/checkout@v3
      - name: schema publish
        env:
          HIVE_TOKEN: ${{ secrets.HIVE_TOKEN }}
          HIVE_ENDPOINT: ${{ secrets.HIVE_ENDPOINT }}
        run: |
          curl -sSL https://graphql-hive.com/install.sh | sh
          hive schema:publish "schema.graphql" \
            --registry.accessToken ${{ env.HIVE_TOKEN }} \
            --github
```
